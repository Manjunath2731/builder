{"version":3,"sources":["content/team/addCRMMembers.jsx"],"names":["CardWrapper","styled","Card","theme","transitions","create","AddTeamMember","useTheme","dispatch","useDispatch","useEffect","addPermission","addTeamTypes","addUsers","permission","teamTypes","user","useSelector","state","meeting","users","team","teams","updateUrl","result","setProfileUrl","url","navigate","useNavigate","useState","name","setName","isLoading","setIsLoading","profileUrl","email","setEmail","address","setAddress","phone","setPhone","designation","setDesignation","ReportTo","setReportTo","userData","JSON","parse","window","localStorage","getItem","getCRMId","filter","item","str","undefined","toLowerCase","_id","createCRMMemberOnSubmit","a","payload","fullName","phoneNumber","teamId","profileImage","builderCompany","createTeamMember","response","showNotification","notificationType","SUCCESS","errorMessage","data","ERROR","sx","paddingTop","paddingLeft","fontSize","typography","pxToRem","mb","variant","mt","autoComplete","my","mx","container","columnSpacing","rowSpacing","xs","width","id","label","fullWidth","onChange","event","target","value","ml","display","map","first_name","last_name","title","handleChange","e","GetURLForUpload","onClick","size","style","color"],"mappings":"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","file":"static/js/94.baa6addc.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router';\r\nimport {\r\n  Box,\r\n  Card,\r\n  styled,\r\n  Grid,\r\n  InputLabel,\r\n  Button,\r\n  useTheme,\r\n  Typography,\r\n  TextField,\r\n  Select,\r\n  MenuItem,\r\n  //   Checkbox,\r\n  CircularProgress,\r\n  Divider //  Card, Divider\r\n} from '@mui/material';\r\n\r\nimport FormControl from '@mui/material/FormControl';\r\n// import FormGroup from '@mui/material/FormGroup';\r\n// import FormControlLabel from '@mui/material/FormControlLabel';\r\nimport { showNotification } from 'src/utils/commonUtility';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { notificationType } from 'src/constants/NotificationType';\r\nimport { createTeamMember } from '../../axiosInstances/Api';\r\nimport { addPermission, addTeamTypes } from '../../slices/team';\r\nimport { addUsers } from '../../slices/meetings';\r\n\r\nimport {\r\n  UploadProfileImage,\r\n  GetURLForUpload\r\n} from '../../components/Projects/AddProject/Index';\r\n\r\nconst CardWrapper = styled(Card)(\r\n  ({ theme }) => `\r\n      transition: ${theme.transitions.create(['box-shadow'])};\r\n      position: relative;\r\n      z-index: 5;\r\n      height:100%;\r\n      width: 97%;\r\n      }\r\n    `\r\n);\r\n\r\nconst AddTeamMember = () => {\r\n  const theme = useTheme();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(addPermission());\r\n    dispatch(addTeamTypes());\r\n    dispatch(addUsers());\r\n  }, []);\r\n\r\n  let permission = [];\r\n  let teamTypes = [];\r\n  const user = useSelector((state) => state.meeting?.users);\r\n  permission = useSelector((state) => state.team.permission);\r\n  teamTypes = useSelector((state) => state.team.teams);\r\n  useEffect(() => {}, [permission, teamTypes]);\r\n\r\n  const updateUrl = (result) => {\r\n    setProfileUrl(result[0].url);\r\n  };\r\n  const navigate = useNavigate();\r\n  const [name, setName] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [profileUrl, setProfileUrl] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [address, setAddress] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [designation, setDesignation] = useState('none');\r\n  const [ReportTo, setReportTo] = useState('none');\r\n  const userData = JSON.parse(window.localStorage.getItem('user'));\r\n  const getValidValue = (str) => {\r\n    if (str !== null && str !== undefined) {\r\n      return str;\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const getCRMId = (teamTypes) => {\r\n    let crmType = teamTypes.filter(\r\n      (item) => getValidValue(item.name)?.toLowerCase() === 'crm'\r\n    );\r\n    return crmType[0]._id;\r\n  };\r\n  const createCRMMemberOnSubmit = async () => {\r\n    setIsLoading(true);\r\n    let payload = {\r\n      fullName: name,\r\n      email,\r\n      phoneNumber: phone,\r\n      designation,\r\n      teamId: getCRMId(teamTypes),\r\n      profileImage: profileUrl,\r\n      address,\r\n      builderCompany: userData.builderCompany[0]\r\n    };\r\n    const response = await createTeamMember(payload);\r\n\r\n    if (response) {\r\n      navigate(`/team`);\r\n    }\r\n    if (response === 200 || response === 201) {\r\n      let sucessMessage = 'Sucessfully Created Team member';\r\n      showNotification(sucessMessage, notificationType.SUCCESS);\r\n      setIsLoading(false);\r\n    } else if (response === 400) {\r\n      // let errorMessage = 'Member Already Exist.';\r\n      let errorMessage = response?.data || 'Something went wrong';\r\n      showNotification(errorMessage, notificationType.ERROR);\r\n      // showNotification(errorMessage, notificationType.ERROR);\r\n      setIsLoading(false);\r\n    } else {\r\n      let errorMessage = 'Something went wrong';\r\n      showNotification(errorMessage, notificationType.ERROR);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ paddingTop: 2, paddingLeft: 4 }}>\r\n        <Typography\r\n          sx={{\r\n            fontSize: `${theme.typography.pxToRem(20)}`,\r\n            mb: 1\r\n          }}\r\n          variant=\"h2\"\r\n        >\r\n          Add CRM Members\r\n        </Typography>\r\n        <CardWrapper sx={{ mt: 3 }}>\r\n          <Box autoComplete=\"off\" my={1} mx={9} mt={8}>\r\n            <Grid container columnSpacing={8} rowSpacing={4}>\r\n              <Grid item xs={6}>\r\n                <Box width=\"100%\">\r\n                  <TextField\r\n                    id=\"employee_name\"\r\n                    name=\"employee_name\"\r\n                    label=\"Employee Name\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    onChange={(event) => setName(event.target.value)}\r\n                    value={name}\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Box width=\"100%\">\r\n                  <FormControl fullWidth variant=\"outlined\">\r\n                    <InputLabel>Designation</InputLabel>\r\n                    <Select\r\n                      label=\"designation\"\r\n                      onChange={(event) => {\r\n                        setDesignation(event.target.value);\r\n                      }}\r\n                      value={designation}\r\n                      name=\"designation\"\r\n                    >\r\n                      <MenuItem key={1} value=\"none\">\r\n                        <Box ml={2} display=\"inline-block\">\r\n                          Select\r\n                        </Box>\r\n                      </MenuItem>\r\n                      <MenuItem key={1} value=\"sales manager\">\r\n                        <Box ml={2} display=\"inline-block\">\r\n                          Sales Manger\r\n                        </Box>\r\n                      </MenuItem>\r\n                      <MenuItem key={2} value=\"pr manager\">\r\n                        <Box ml={2} display=\"inline-block\">\r\n                          PR Manger\r\n                        </Box>\r\n                      </MenuItem>\r\n                      <MenuItem key={2} value=\"software developer\">\r\n                        <Box ml={2} display=\"inline-block\">\r\n                          Software Developer\r\n                        </Box>\r\n                      </MenuItem>\r\n                      <MenuItem key={2} value=\"procurment manger\">\r\n                        <Box ml={2} display=\"inline-block\">\r\n                          Procurment manager\r\n                        </Box>\r\n                      </MenuItem>\r\n                    </Select>\r\n                  </FormControl>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Box width=\"100%\">\r\n                  <TextField\r\n                    id=\"phone_no\"\r\n                    name=\"phone_no\"\r\n                    label=\"Phone no\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    onChange={(event) => setPhone(event.target.value)}\r\n                    value={phone}\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Box width=\"100%\">\r\n                  <TextField\r\n                    id=\"Official EmailId\"\r\n                    name=\"emailId\"\r\n                    label=\"Official EmailId\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    onChange={(event) => setEmail(event.target.value)}\r\n                    value={email}\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Box width=\"100%\">\r\n                  <FormControl fullWidth variant=\"outlined\">\r\n                    <InputLabel>Reports to</InputLabel>\r\n                    <Select\r\n                      label=\"reports-to\"\r\n                      onChange={(event) => {\r\n                        setReportTo(event.target.value);\r\n                      }}\r\n                      value={ReportTo}\r\n                      name=\"reports-to\"\r\n                      // disabled\r\n                    >\r\n                      <MenuItem key={1} value=\"none\">\r\n                        <Box ml={2} display=\"inline-block\">\r\n                          Select\r\n                        </Box>\r\n                      </MenuItem>\r\n                      {user.map((item) => {\r\n                        return (\r\n                          <MenuItem\r\n                            value={item.id}\r\n                          >{`${item.first_name} ${item.last_name}`}</MenuItem>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </FormControl>\r\n                  <Typography\r\n                    sx={{\r\n                      fontSize: `${theme.typography.pxToRem(15)}`,\r\n                      mb: 0\r\n                    }}\r\n                    variant=\"subtitle1\"\r\n                  >\r\n                    Note: You need to add managers first\r\n                  </Typography>\r\n                </Box>\r\n              </Grid>\r\n              {/* </Grid> */}\r\n              {/* <Grid container columnSpacing={8} rowSpacing={4} mt={0}> */}\r\n              <Grid item xs={6}>\r\n                <Box width=\"100%\">\r\n                  <TextField\r\n                    id=\"Address\"\r\n                    name=\"address\"\r\n                    label=\"Address\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    onChange={(event) => setAddress(event.target.value)}\r\n                    value={address}\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Box width=\"100%\">\r\n                  <UploadProfileImage\r\n                    title=\"Upload profile pic\"\r\n                    handleChange={(e) => {\r\n                      GetURLForUpload(e, updateUrl);\r\n                    }}\r\n                    name={profileUrl}\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n            <Divider sx={{ my: 3 }} />\r\n            <Box mt={5} mb={10}>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={() => createCRMMemberOnSubmit()}\r\n              >\r\n                {isLoading ? (\r\n                  <CircularProgress\r\n                    size={22}\r\n                    style={{\r\n                      color: 'white'\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  'Add CRM members'\r\n                )}\r\n              </Button>\r\n              <Button\r\n                sx={{ ml: 2 }}\r\n                variant=\"outlined\"\r\n                onClick={() => {\r\n                  navigate(`/team`);\r\n                }}\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </CardWrapper>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddTeamMember;\r\n"],"sourceRoot":""}