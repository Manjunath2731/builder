(this["webpackJsonptokyo-white-react-admin-dashboard-js"]=this["webpackJsonptokyo-white-react-admin-dashboard-js"]||[]).push([[80],{1306:function(e,t,n){"use strict";n.r(t),n.d(t,"GetResultFileArray",(function(){return H}));var a=n(17),i=n(5),c=n(10),o=n(3),r=n.n(o),s=n(6),l=n(4),d=n(1),u=n(23),b=n(307),p=n.n(b),j=n(8),f=n(172),m=n(43),h=n(27),v=n(29),O=n(171),x=n(94),y=n(807),g=n(801),S=n(356),w=n(799),_=n(170),T=n(89),k=n(230),C=n(790),R=n(303),E=n(362),B=n.n(E),D=n(797),P=n(21),A=n(806),U=n(979),I=n(52),L=n(60),N=n(368),M=n(361),z=n(906),F=n(31),Y=n(0),G=Object(j.a)(f.a)((function(e){var t=e.theme;return"\n      transition: ".concat(t.transitions.create(["box-shadow"]),";\n      position: relative;\n      z-index: 5;\n      height:100%;\n      width: 97%;\n      }\n    ")})),q={details:!1},H=function(e){var t=e.map((function(e){return{label:(null===e||void 0===e?void 0:e.originalFileName)||"",url:(null===e||void 0===e?void 0:e.url)||"",contentType:(null===e||void 0===e?void 0:e.contentType)||"",formType:(null===e||void 0===e?void 0:e.type)||""}}));return t.length>0?t:[]};t.default=function(){var e,t=Object(u.i)(),n=Object(m.a)(),o=Object(u.h)(),b=Object(P.b)(),j=Object(d.useState)(!1),f=Object(l.a)(j,2),E=f[0],W=f[1],V=Object(P.c)((function(e){return e.broadcast.userBroadcast})),J=Object(d.useState)(!1),K=Object(l.a)(J,2),Q=K[0],X=K[1],Z=Object(d.useState)({select_project:"",broadcast_title:"",broadcast_description:"",add_link:"",broadcast_frequency:"immediate"}),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ne=Object(d.useState)([]),ae=Object(l.a)(ne,2),ie=ae[0],ce=ae[1],oe=Object(d.useState)(-1),re=Object(l.a)(oe,2),se=re[0],le=re[1],de=Object(d.useState)(new Date),ue=Object(l.a)(de,2),be=ue[0],pe=ue[1],je=Object(d.useState)(p()()),fe=Object(l.a)(je,2),me=fe[0],he=fe[1],ve=Object(d.useState)(q),Oe=Object(l.a)(ve,2),xe=Oe[0],ye=Oe[1],ge=Object(d.useState)([]),Se=Object(l.a)(ge,2),we=Se[0],_e=Se[1],Te=Object(P.c)((function(e){return e.broadcast.broadcastType})),ke=Object(P.c)((function(e){var t;return null===(t=e.meeting)||void 0===t?void 0:t.projects})),Ce=Object(d.useState)(!1),Re=Object(l.a)(Ce,2),Ee=Re[0],Be=Re[1],De=Object(d.useState)(""),Pe=Object(l.a)(De,2),Ae=Pe[0],Ue=Pe[1],Ie=Object(d.useState)(""),Le=Object(l.a)(Ie,2),Ne=Le[0],Me=Le[1];Object(d.useEffect)(Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.broadCastID&&(b(Object(N.d)(t.broadCastID)),X(!0)),Object(M.e)();case 2:case"end":return e.stop()}}),e)}))),[]),Object(d.useEffect)((function(){if(ke.length){var e=ke.filter((function(e){return"PUBLISHED"===e.status}));_e(e)}}),[ke,Te]),Object(d.useEffect)((function(){if(Q&&V.length>0){var e,t;te({select_project:null===(e=V[0])||void 0===e?void 0:e.projectId,broadcast_title:null===(t=V[0])||void 0===t?void 0:t.title,broadcast_description:V[0].description,add_link:V[0].link,broadcast_frequency:V[0].delivery});var n=V[0].content.map((function(e){return{label:e.label,url:e.downloadLink,contentType:e.contentType}}));ce(n),pe(V[0].deliveryTime),he(p()(V[0].deliveryTime))}}),[Q,V,ke]);var ze=function(e){var t=e.target.value;"broadcast_title"===e.target.name&&""!==e.target.value&&ye((function(e){return Object(c.a)(Object(c.a)({},e),{},{details:!1})})),te(Object(c.a)(Object(c.a)({},ee),{},Object(i.a)({},e.target.name,t)))},Fe=function(e){console.log(e);var t=H(e),n=Object(a.a)(ie);Array.prototype.push.apply(n,t);var i=n.filter(Boolean);console.log("filtered",i),ce(i)},Ye=function(e,t){var n=p()(e).format("YYYY/MM/DD"),a=p()(t).format("HH:mm"),i=p()("".concat(n," ").concat(a));return new Date(i).toISOString()},Ge=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n,a,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(Ye(be,me)),ee.broadcast_title){e.next=4;break}return ye((function(e){return Object(c.a)(Object(c.a)({},e),{},{details:!0})})),e.abrupt("return");case 4:if(n=ie.map((function(e){return{downloadLink:null===e||void 0===e?void 0:e.url,label:null===e||void 0===e?void 0:e.label,contentType:null===e||void 0===e?void 0:e.contentType}})),a=Ye(be,me),"none"===ee.select_project&&(ee.select_project=null),i={title:ee.broadcast_title,description:ee.broadcast_description,projectId:ee.select_project?ee.select_project:void 0,content:n,delivery:ee.broadcast_frequency,link:ee.add_link||"",category:Te,deliveryTime:a},W(!0),i.title&&(i.description||(null===i||void 0===i||null===(t=i.content[0])||void 0===t?void 0:t.downloadLink))){e.next=15;break}return W(!1),"Please fill out the form",Ue("Please fill out the form"),Be(!0),e.abrupt("return");case 15:return e.next=17,Object(I.p)(i);case 17:200===(o=e.sent)||201===o?("Sucessfully Created Broadcast",Be(!0),Me("Sucessfully Created Broadcast"),W(!1)):400===o?("Unable to create Broadcast",Ue("Unable to create Broadcast"),Be(!0),W(!1)):(W(!1),"Something went wrong",Ue("Something went wrong"),Be(!0),W(!1));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a,i,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(Ye(be,me)),ee.broadcast_title){e.next=4;break}return ye((function(e){return Object(c.a)(Object(c.a)({},e),{},{details:!0})})),e.abrupt("return");case 4:if(a=ie.map((function(e){return{downloadLink:null===e||void 0===e?void 0:e.url,label:null===e||void 0===e?void 0:e.label,contentType:null===e||void 0===e?void 0:e.contentType}})),i=Ye(be,me),"none"===ee.select_project&&(ee.select_project=null),o={title:ee.broadcast_title,description:ee.broadcast_description,projectId:ee.select_project?ee.select_project:void 0,content:a.length>0?a:null,delivery:ee.broadcast_frequency,link:ee.add_link||"",category:Te,deliveryTime:i},W(!0),o.title&&(o.description||(null===o||void 0===o||null===(n=o.content[0])||void 0===n?void 0:n.downloadLink))){e.next=15;break}return W(!1),"Please fill out the form",Ue("Please fill out the form"),Be(!0),e.abrupt("return");case 15:return e.next=17,Object(I.T)(t,o);case 17:204===(s=e.sent).status?("Broadcast Updated",Be(!0),Me("Broadcast Updated"),W(!1)):400===s.status?("Unable to update broadcast",Ue("Unable to update broadcast"),Be(!0),W(!1)):(W(!1),"Something went wrong",Ue("Something went wrong"),Be(!0),W(!1));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsxs)(h.a,{sx:{py:2,pl:{xs:5,lg:6},pr:{xs:5,md:6}},children:[Q?Object(Y.jsxs)(h.a,{display:"flex",alignItems:"center",justifyContent:"flex-start",cursor:"pointer",onClick:function(){o("/broadcast")},mb:1,children:[Object(Y.jsx)(B.a,{fontSize:"small",sx:{cursor:"pointer"}}),Object(Y.jsx)(v.a,{sx:{fontSize:"".concat(n.typography.pxToRem(15))},variant:"h4",children:"EDIT BROADCAST"})]}):Object(Y.jsxs)(h.a,{display:"flex",alignItems:"center",justifyContent:"flex-start",cursor:"pointer",onClick:function(){o("/broadcast/create-broadcast")},mb:1,children:[Object(Y.jsx)(B.a,{fontSize:"small",sx:{cursor:"pointer"}}),Object(Y.jsx)(v.a,{sx:{fontSize:"".concat(n.typography.pxToRem(15))},variant:"h4",children:"CREATE BROADCAST"})]}),Object(Y.jsx)(G,{sx:{mt:3},children:Object(Y.jsxs)(h.a,{autoComplete:"off",my:1,mx:9,mt:4,children:[Object(Y.jsx)(v.a,{sx:{fontSize:"".concat(n.typography.pxToRem(15)),mb:1},variant:"subtitle1",children:Q?"":"2 of 2"}),Object(Y.jsx)(v.a,{sx:{fontSize:"".concat(n.typography.pxToRem(17)),mb:3,mt:1},variant:"h2",children:null===(e=U.f[Te])||void 0===e?void 0:e.split("_").join(" ")}),Object(Y.jsxs)(O.a,{container:!0,columnSpacing:6,rowSpacing:4,children:[Object(Y.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(Y.jsx)(h.a,{width:"100%",mb:4,children:Object(Y.jsx)(x.a,{id:"broadcast_title",name:"broadcast_title",label:"Broadcast Title*",variant:"outlined",fullWidth:!0,onChange:function(e){return ze(e)},value:ee.broadcast_title,placeholder:"Enter Broadcast Title",helperText:xe.details?"This field is required":"",error:xe.details})}),Object(Y.jsx)(h.a,{width:"100%",mb:4,children:Object(Y.jsx)(x.a,{id:"broadcast_description",name:"broadcast_description",label:"Broadcast Description",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,onChange:function(e){return ze(e)},value:ee.broadcast_description})}),Object(Y.jsx)(h.a,{width:"100%",mb:4,children:Object(Y.jsxs)(A.a,{fullWidth:!0,variant:"outlined",children:[Object(Y.jsx)(y.a,{children:"Select Project"}),Object(Y.jsxs)(g.a,{label:"select project",onChange:function(e){ze(e)},value:ee.select_project,name:"select_project",children:[Object(Y.jsx)(S.a,{value:"none",children:Object(Y.jsx)(h.a,{ml:2,display:"inline-block",children:"Select"})},1),we.map((function(e){return Object(Y.jsx)(S.a,{value:e._id,children:e.name})}))]})]})}),Object(Y.jsx)(h.a,{width:"100%",mb:2,children:Object(Y.jsx)(x.a,{id:"add_link",name:"add_link",label:"Add Link",variant:"outlined",fullWidth:!0,onChange:function(e){return ze(e)},value:ee.add_link})}),Object(Y.jsx)(h.a,{children:Object(Y.jsx)(A.a,{children:Object(Y.jsx)(C.a,{"aria-labelledby":"demo-controlled-radio-buttons-group",name:"broadcast_frequency",onChange:function(e){return ze(e)},value:ee.broadcast_frequency,children:Object(Y.jsxs)(h.a,{sx:{display:"flex",justifyContent:"space-between"},children:[Object(Y.jsx)(R.a,{value:"immediate",control:Object(Y.jsx)(w.a,{}),label:"Immediate"}),Object(Y.jsx)(R.a,{value:"scheduleBroadcast",control:Object(Y.jsx)(w.a,{}),label:"Schedule Broadcast"})]})})})}),"scheduleBroadcast"===(null===ee||void 0===ee?void 0:ee.broadcast_frequency)&&Object(Y.jsxs)(h.a,{width:"100%",sx:{display:"flex",alignItems:"center",columnGap:2},my:1,children:[Object(Y.jsx)(D.a,{id:"Schedule",label:"Schedule",name:"Schedule",minDate:new Date,value:be,onChange:function(e){pe(e)},renderInput:function(e){return Object(Y.jsx)(x.a,Object(c.a)({fullWidth:!0},e))}}),Object(Y.jsx)(z.a,{style:{width:"-webkit-fill-available"},label:"Schedule Time",value:me,isToday:p()(new Date).format("YYYY/MM/DD")===p()(be).format("YYYY/MM/DD"),startTime:p()(),onChange:function(e){he(e)},minuteStep:5})]})]}),Object(Y.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(Y.jsx)(v.a,{children:"Upload Broadcast"}),Object(Y.jsx)(L.UploadFileVertical,{nameNonTitle:"projectimages".concat(se),title:"",handleChange:function(e){!function(e,t,n){var a,i,c,o,r,s,l,d,u=e.target.files||e.dataTransfer.files;u&&("application/pdf"===(null===(a=u[0])||void 0===a?void 0:a.type)||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===(null===(i=u[0])||void 0===i?void 0:i.type)?u[0].size>209715200&&(Ue("Document file should not exceed 200MB"),Be(!0)):(null===(c=u[0])||void 0===c?void 0:c.type.startsWith("image/"))?u[0].size>2097152&&(Ue("Image size should not exceed 2MB"),Be(!0)):"application/vnd.ms-powerpoint"===(null===(o=u[0])||void 0===o?void 0:o.type)||"application/vnd.ms-powerpoint"===(null===(r=u[0])||void 0===r?void 0:r.type)||"application/vnd.openxmlformats-officedocument.presentationml.presentation"===(null===(s=u[0])||void 0===s?void 0:s.type)||"application/msword"===(null===(l=u[0])||void 0===l?void 0:l.type)||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===(null===(d=u[0])||void 0===d?void 0:d.type)?u[0].size>209715200&&(Ue("Document file should not exceed 200MB"),Be(!0)):u[0].type.startsWith("video/")&&u[0].size>209715200&&(Ue("Video file should not exceed 200MB"),Be(!0)));Object(L.GetURLForUpload)(e,t,n)}(e,Fe,se)},handleDelete:function(e,t,n){!function(e,t,n,i){Object(L.handleRemoveFromS3)(t).then((function(e){if(e){var t=Object(a.a)(ie);t.splice(n,1),i(t.length-1),ce(t)}}))}(0,e,n,le)},name:ie,createBroadcast:1})]})]}),Object(Y.jsx)(_.a,{}),Object(Y.jsxs)(h.a,{mt:5,mb:10,children:[Q?Object(Y.jsx)(T.a,{variant:"contained",onClick:function(){qe(t.broadCastID)},children:E?Object(Y.jsx)(k.a,{size:22,style:{color:"white"}}):"Save Changes"}):Object(Y.jsx)(T.a,{variant:"contained",onClick:function(){Ge()},children:E?Object(Y.jsx)(k.a,{size:22,style:{color:"white"}}):"Create Broadcast"}),Object(Y.jsx)(T.a,{sx:{ml:2},variant:"outlined",onClick:function(){o("/broadcast")},children:"Cancel"})]})]})})]}),Object(Y.jsx)(F.a,{isOpen:Ee,isClosed:function(e){e&&(Ue(""),Be(!1),Ae||o("/broadcast"))},errorMessage:Ae,successMessage:Ne,closeSuccessNotification:function(){Me("")}})]})}},906:function(e,t,n){"use strict";var a,i=n(95),c=n(996),o=n(10),r=n(155),s=(n(1),n(307)),l=n.n(s),d=n(1023),u=(n(995),n(0)),b=["className","onChange","value","startTime","isToday","endTime","minuteStep"],p=function(e){var t=e.className,n=e.onChange,a=e.value,i=e.startTime,c=e.isToday,s=void 0!==c&&c,p=e.endTime,j=void 0!==p&&p,f=e.minuteStep,m=void 0===f?1:f,h=Object(r.a)(e,b);return Object(u.jsx)(d.a,Object(o.a)(Object(o.a)({},h),{},{className:t,popupClassName:t,showSecond:!1,onChange:n,hideDisabledOptions:!0,minuteStep:m,value:a,use12Hours:!0,disabledHours:function(){return s||j?function(e){for(var t=[],n=0;n<l()(e).hour();n++)t.push(n);return t}(i):[]},disabledMinutes:function(e){return s||j?function(e,t){var n=[];if(e===l()(t).hour())for(var a=0;a<l()(t).minute();a++)n.push(a);return n}(e,i):[]}}))},j=Object(c.a)(p)(a||(a=Object(i.a)(["\n  & .rc-time-picker-panel-select-option-selected {\n    background-color: #edeffe;\n    font-weight: normal;\n  \n  }\n\n  & .rc-time-picker-clear,\n  & .rc-time-picker-clear-icon:after {\n    font-size: 17px;\n    margin:5px;\n  }\n  & .rc-time-picker-input{\n    height:50px;\n    border-radius:10px\n  \n  }\n  & .rc-time-picker-panel-select{\n    width:'-webkit-fill-available';\n  }\n  & .rc-time-picker-panel-select,\n  & .rc-time-picker-input,\n  & .rc-time-picker-panel-input {\n    font-family: \"Consolas\", sans-serif;\n    font-size: 17px;\n    cursor: pointer;\n\n\n    \n\n    ::-webkit-scrollbar {\n      width: 0;\n      height: 0;\n    }\n  }\n"])));t.a=j},979:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return s}));var a=["Annoucements","Awards & Achievements","Teasers for upcoming launches","Teaser for upcoming events","Media Ads (Newspaper, radio, TV)","Thanks message","Contact Number updates","New Service Update","HR/staff announcements","Sales Gallery Visit Request","Message from Management","Holidays","Infra & Govt. Poilicies news","update","Company news","Greetings"],i=["New Sale Incentive","Holiday Packages","Client visit Incentive","Scheme Related","Booking Gifts"],c=["Assured Lease","Pre Possession Rentals","Return on Investments","Assured Gifts on Walking","Scheme Related","Investment Schemes"],o=["Project Status & Specifications","Project Videos","Payment Plans & Schemes","Pricing Updates","Construction Updates","Inventory Updates","Layout Plans Update","Numbering Plan Update","Master Plan update","RERA update","Brochures","Occupation & Possession","Certificate Announcement","New Tenants & Lease","announcement"],r=["High Tea","New Launch Events","Landmark events"],s={GENERAL_UPDATES:"GENERAL_UPDATES",OFFER_BROKERS:"OFFER_FOR_BROKERS",OFFER_BUYERS:"OFFER_FOR_BUYERS",PROJECT_UPDATES:"PROJECT_UPDATES",EVENTS_POLLS:"EVENTS_AND_POLLS"}}}]);
//# sourceMappingURL=80.4e8d7c65.chunk.js.map