(this["webpackJsonptokyo-white-react-admin-dashboard-js"]=this["webpackJsonptokyo-white-react-admin-dashboard-js"]||[]).push([[84],{1026:function(e,t,a){"use strict";var n=a(5),c=a(7),i=a(2),o=a(1),r=(a(12),a(9)),l=a(154),s=a(706),d=a(18),u=a(241),b=a(15),m=a(8),j=a(81),h=a(88);function p(e){return Object(j.a)("MuiSwitch",e)}var O=Object(h.a)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),f=a(0),v=["className","color","edge","size","sx"],g=Object(m.a)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,a.edge&&t["edge".concat(Object(d.a)(a.edge))],t["size".concat(Object(d.a)(a.size))]]}})((function(e){var t,a=e.ownerState;return Object(i.a)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===a.edge&&{marginLeft:-8},"end"===a.edge&&{marginRight:-8},"small"===a.size&&(t={width:40,height:24,padding:7},Object(n.a)(t,"& .".concat(O.thumb),{width:16,height:16}),Object(n.a)(t,"& .".concat(O.switchBase),Object(n.a)({padding:4},"&.".concat(O.checked),{transform:"translateX(16px)"})),t))})),x=Object(m.a)(u.a,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var a=e.ownerState;return[t.switchBase,Object(n.a)({},"& .".concat(O.input),t.input),"default"!==a.color&&t["color".concat(Object(d.a)(a.color))]]}})((function(e){var t,a=e.theme;return t={position:"absolute",top:0,left:0,zIndex:1,color:"light"===a.palette.mode?a.palette.common.white:a.palette.grey[300],transition:a.transitions.create(["left","transform"],{duration:a.transitions.duration.shortest})},Object(n.a)(t,"&.".concat(O.checked),{transform:"translateX(20px)"}),Object(n.a)(t,"&.".concat(O.disabled),{color:"light"===a.palette.mode?a.palette.grey[100]:a.palette.grey[600]}),Object(n.a)(t,"&.".concat(O.checked," + .").concat(O.track),{opacity:.5}),Object(n.a)(t,"&.".concat(O.disabled," + .").concat(O.track),{opacity:"light"===a.palette.mode?.12:.2}),Object(n.a)(t,"& .".concat(O.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,a=e.theme,c=e.ownerState;return Object(i.a)({"&:hover":{backgroundColor:Object(s.a)(a.palette.action.active,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==c.color&&(t={},Object(n.a)(t,"&.".concat(O.checked),Object(n.a)({color:a.palette[c.color].main,"&:hover":{backgroundColor:Object(s.a)(a.palette[c.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(O.disabled),{color:"light"===a.palette.mode?Object(s.e)(a.palette[c.color].main,.62):Object(s.b)(a.palette[c.color].main,.55)})),Object(n.a)(t,"&.".concat(O.checked," + .").concat(O.track),{backgroundColor:a.palette[c.color].main}),t))})),y=Object(m.a)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:"light"===t.palette.mode?t.palette.common.black:t.palette.common.white,opacity:"light"===t.palette.mode?.38:.3}})),w=Object(m.a)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){return{boxShadow:e.theme.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),S=o.forwardRef((function(e,t){var a=Object(b.a)({props:e,name:"MuiSwitch"}),n=a.className,o=a.color,s=void 0===o?"primary":o,u=a.edge,m=void 0!==u&&u,j=a.size,h=void 0===j?"medium":j,O=a.sx,S=Object(c.a)(a,v),k=Object(i.a)({},a,{color:s,edge:m,size:h}),C=function(e){var t=e.classes,a=e.edge,n=e.size,c=e.color,o=e.checked,r=e.disabled,s={root:["root",a&&"edge".concat(Object(d.a)(a)),"size".concat(Object(d.a)(n))],switchBase:["switchBase","color".concat(Object(d.a)(c)),o&&"checked",r&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},u=Object(l.a)(s,p,t);return Object(i.a)({},t,u)}(k),M=Object(f.jsx)(w,{className:C.thumb,ownerState:k});return Object(f.jsxs)(g,{className:Object(r.a)(C.root,n),sx:O,ownerState:k,children:[Object(f.jsx)(x,Object(i.a)({type:"checkbox",icon:M,checkedIcon:M,ref:t,ownerState:k},S,{classes:Object(i.a)({},C,{root:C.switchBase})})),Object(f.jsx)(y,{className:C.track,ownerState:k})]})}));t.a=S},1315:function(e,t,a){"use strict";a.r(t);var n=a(10),c=a(3),i=a.n(c),o=a(6),r=a(17),l=a(4),s=a(1),d=a.n(s),u=a(23),b=a(33),m=a.n(b),j=a(8),h=a(172),p=a(43),O=a(27),f=a(29),v=a(171),g=a(729),x=a(94),y=a(511),w=a(231),S=a(170),k=a(1026),C=a(89),M=a(230),R=a(802),I=a(67),_=a(234),z=a(806),E=a(730),T=a(303),N=a(21),A=a(52),B=a(914),D=a(158),P=a(361),W=a(60),U=a(127),q=a(73),F=a(112),J=a(31),L=a(0),H=JSON.parse(window.localStorage.getItem("user")),X=Object(j.a)(h.a)((function(e){var t=e.theme;return"\n      transition: ".concat(t.transitions.create(["box-shadow"]),";\n      position: relative;\n      z-index: 5;\n      height:100%;\n      width: 97%;\n      display: flex;\n      justify-content: center;\n      }\n    ")})),G={name:!1,mobileNumber:!1,email:!1,projectId:!1};t.default=function(){var e=Object(p.a)(),t=Object(N.b)(),a=Object(u.i)(),c=a.action,b=a.userID,j=a.selectedTab,h=Object(s.useState)(!1),V=Object(l.a)(h,2),K=V[0],Q=V[1],Y=Object(s.useState)(G),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],te=Object(N.c)((function(e){return e.team.teamById})),ae=d.a.useState(!0),ne=Object(l.a)(ae,2),ce=ne[0],ie=ne[1],oe=Object(s.useState)([]),re=Object(l.a)(oe,2),le=re[0],se=re[1],de=Object(s.useState)(!1),ue=Object(l.a)(de,2),be=ue[0],me=ue[1],je=Object(s.useState)(""),he=Object(l.a)(je,2),pe=he[0],Oe=he[1],fe=Object(s.useState)(""),ve=Object(l.a)(fe,2),ge=ve[0],xe=ve[1];Object(s.useEffect)((function(){t(Object(D.e)(b)),t(Object(U.a)(H.builderCompany[0])),t(Object(D.a)()),t(Object(P.f)()),t(Object(q.a)()),t(Object(D.c)(H.builderCompany[0])),"Edit"!==c||""===b||m.a.isEmpty(te)&&te._id===b||("teams"===j&&Object(A.N)(b).then((function(e){console.log({result:e}),st(Array.isArray(null===e||void 0===e?void 0:e.data)?null===e||void 0===e?void 0:e.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:e._id}})):[])})),"crm"===j&&Object(A.M)(b).then((function(e){st(Array.isArray(null===e||void 0===e?void 0:e.data)?null===e||void 0===e?void 0:e.data.map((function(e){return{label:null===e||void 0===e?void 0:e.name,value:e._id}})):[])})))}),[]);var ye,we,Se=[],ke=Object(N.c)((function(e){return e.role.data})).filter((function(e){return"TEAM_MEMBER"===e.name})),Ce=Object(N.c)((function(e){return e.role.data})).filter((function(e){return"CRM_MEMBER"===e.name}));Se=Object(N.c)((function(e){return e.team.permission})),ye=Object(N.c)((function(e){return e.team.teams})),we=Object(N.c)((function(e){return e.projectList.projectListBuilder})).map((function(e){return{value:null===e||void 0===e?void 0:e._id,label:Object(F.l)(null===e||void 0===e?void 0:e.name)}}));var Me=Object(s.useState)(!1),Re=Object(l.a)(Me,2),Ie=Re[0],_e=Re[1];Object(s.useEffect)((function(){if("Edit"===c&&""!==b&&(!m.a.isEmpty(te)||te._id!==b)){var e=te.designation,t=te.permissions;if(Je("".concat(te.first_name," ").concat(te.last_name)),Ye(te.profileImage),tt(te.email),it(te.phoneNumber),ie(!0===te.is_active),Array.isArray(t)){var a=t.map((function(e){return null===e||void 0===e?void 0:e._id}));Ne(a)}mt(e),Q(!0)}if("crm"===j){var n=Se.filter((function(e){return"addCRMMember"===e.name||"deleteCRMMember"===e.name}));se(n)}else se(Se)}),[Se,ye,te]);var ze=Object(s.useState)([]),Ee=Object(l.a)(ze,2),Te=Ee[0],Ne=Ee[1],Ae=Te.length>0&&Te.length<le.length,Be=Te.length===le.length,De=function(e){if(e.target.checked)Ne([].concat(Object(r.a)(Te),[e.target.id]));else{var t=Te.filter((function(t){return t!==e.target.id}));Ne(t)}},Pe=function(e){Ye(e[0].url)},We=Object(u.h)(),Ue=Object(s.useState)(""),qe=Object(l.a)(Ue,2),Fe=qe[0],Je=qe[1],Le=Object(s.useState)(!1),He=Object(l.a)(Le,2),Xe=He[0],Ge=He[1],Ve=Object(s.useState)(""),Ke=Object(l.a)(Ve,2),Qe=Ke[0],Ye=Ke[1],Ze=Object(s.useState)(""),$e=Object(l.a)(Ze,2),et=$e[0],tt=$e[1],at=Object(s.useState)(""),nt=Object(l.a)(at,2),ct=nt[0],it=nt[1],ot=Object(s.useState)("none"),rt=Object(l.a)(ot,2),lt=rt[0],st=rt[1],dt=Object(s.useState)(""),ut=Object(l.a)(dt,2),bt=ut[0],mt=ut[1],jt=JSON.parse(window.localStorage.getItem("user")),ht=function(e,t,a){return Promise.all(Object(r.a)(a).map((function(a){return pt(e,t,a)})))},pt=function(){var e=Object(o.a)(i.a.mark((function e(t,a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==Ce[0]._id){e.next=3;break}return e.next=3,Object(A.l)(a,n);case 3:if(t!==ke[0]._id){e.next=6;break}return e.next=6,Object(A.m)(a,n);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ot=function(){var e=Object(o.a)(i.a.mark((function e(){var t,a,c,o,r,l,s,d,u,m,h,p,O,f,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe||ee((function(e){return Object(n.a)(Object(n.a)({},e),{},{name:!0})})),et||ee((function(e){return Object(n.a)(Object(n.a)({},e),{},{email:!0})})),ct||ee((function(e){return Object(n.a)(Object(n.a)({},e),{},{mobileNumber:!0})})),Fe&&et&&ct){e.next=5;break}return e.abrupt("return");case 5:if(Ge(!0),Oe(""),t=Fe.split(" "),a=t[0],c=t[1]?t[1]:"",o={first_name:a,last_name:c,email:et,phoneNumber:ct,designation:bt,permissions:Te,role:"teams"===j?ke[0]._id:Ce[0]._id,profileImage:Qe,is_active:ce,builderCompany:jt.builderCompany[0],project:Array.isArray(lt)?lt.map((function(e){return e.value})):[]},!K){e.next=37;break}return te.email===o.email&&delete o.email,e.next=15,Object(A.E)(b,o);case 15:if(200!==(r=e.sent).status&&201!==r.status){e.next=34;break}if(!((null===o||void 0===o||null===(l=o.project)||void 0===l?void 0:l.length)>0)){e.next=26;break}return s={userId:r.data.data},e.next=21,ht(o.role,s,o.project);case 21:me(!0),xe("Successfully Edited Team member"),Ge(!1),e.next=32;break;case 26:return d={userId:r.data.data},e.next=29,pt(o.role,d,!1);case 29:me(!0),xe("Successfully Edited Team member"),Ge(!1);case 32:e.next=35;break;case 34:400===r.status?(u=r.data.message||"Something went wrong",Oe(u),me(!0),Ge(!1)):("Something went wrong",Oe("Something went wrong"),me(!0),Ge(!1));case 35:e.next=58;break;case 37:return e.prev=37,e.next=40,Object(A.y)(o);case 40:return m=e.sent,h=m.data,p={userId:h.data},e.next=45,ht(o.role,p,o.project);case 45:xe("Successfully Created Team member"),me(!0),e.next=55;break;case 49:e.prev=49,e.t0=e.catch(37),v=(null===(O=e.t0.response)||void 0===O||null===(f=O.data)||void 0===f?void 0:f.message)||"Something went wrong",console.error("Error message:",v),Oe(v),me(!0);case 55:return e.prev=55,Ge(!1),e.finish(55);case 58:case"end":return e.stop()}}),e,null,[[37,49,55,58]])})));return function(){return e.apply(this,arguments)}}();if("Edit"===c&&m.a.isEmpty(te)&&(null===te||void 0===te?void 0:te._id)!==b)return Object(L.jsx)(I.a,{});return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(O.a,{sx:{p:3,ml:4},children:[Object(L.jsx)(f.a,{sx:{fontSize:"".concat(e.typography.pxToRem(20)),mb:1},variant:"h2",children:K?"Edit ".concat("teams"===j?"Team":"CRM"," Member"):"Add ".concat("teams"===j?"Team":"CRM"," Member")}),Object(L.jsx)(X,{sx:{mt:3,height:200},children:Object(L.jsxs)(O.a,{autoComplete:"off",my:1,mx:8,mt:8,sx:{width:{xs:"100%",md:"70%%",lg:"65%",xxl:"50%"}},children:[Object(L.jsxs)(v.a,{container:!0,columnSpacing:4,children:[Object(L.jsx)(v.a,{item:!0,xs:6,sx:{alignSelf:"center",justifySelf:"center"},children:Qe?Object(L.jsx)(O.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},width:"100%",height:"100%",children:Object(L.jsx)(R.a,{overlap:"circular",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:Object(L.jsx)("button",{style:{margin:"auto",display:"block",width:"20px",height:"20px",border:"none",borderRadius:"50%",background:"rgba(0, 0, 0, 0.5)",color:"red",cursor:"pointer",padding:0,fontSize:"18px"},type:"button",onClick:function(){_e(!0)},children:"\xd7"}),children:Object(L.jsx)(g.a,{sx:{width:210,height:200,border:"10px solid #eeeeee"},alt:"Travis Howard",src:Qe})})}):Object(L.jsx)(W.UploadProfileImage,{title:"Upload profile picture",handleChange:function(e){!function(e,t){var a,n,c,i,o,r,l,s,d=e.target.files||e.dataTransfer.files;d&&("application/pdf"===(null===(a=d[0])||void 0===a?void 0:a.type)||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===(null===(n=d[0])||void 0===n?void 0:n.type)?d[0].size>209715200&&(Oe("Document file should not exceed 200MB"),me(!0)):(null===(c=d[0])||void 0===c?void 0:c.type.startsWith("image/"))?d[0].size>2097152&&(Oe("Image size should not exceed 2MB"),me(!0)):"application/vnd.ms-powerpoint"===(null===(i=d[0])||void 0===i?void 0:i.type)||"application/vnd.ms-powerpoint"===(null===(o=d[0])||void 0===o?void 0:o.type)||"application/vnd.openxmlformats-officedocument.presentationml.presentation"===(null===(r=d[0])||void 0===r?void 0:r.type)||"application/msword"===(null===(l=d[0])||void 0===l?void 0:l.type)||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===(null===(s=d[0])||void 0===s?void 0:s.type)?d[0].size>209715200&&(Oe("Document file should not exceed 200MB"),me(!0)):d[0].type.startsWith("video/")&&d[0].size>209715200&&(Oe("Video file should not exceed 200MB"),me(!0)));Object(W.GetURLForUpload)(e,t)}(e,Pe)},name:Qe,style:{paddingBottom:5.5,paddingTop:6},profileUrl:Qe})}),Object(L.jsx)(v.a,{item:!0,xs:6,children:Object(L.jsxs)(v.a,{container:!0,columnSpacing:4,rowSpacing:2,children:[Object(L.jsx)(v.a,{item:!0,xs:12,children:Object(L.jsx)(x.a,{id:"phone_no",name:"phone_no",label:"Mobile Number*",variant:"outlined",fullWidth:!0,onChange:function(e){if(""!==e.target.value&&ee((function(e){return Object(n.a)(Object(n.a)({},e),{},{mobileNumber:!1})})),e.target.value.length>10){return Oe("Phone Number must contain only 10 digits"),void me(!0)}it(e.target.value)},value:ct,error:null===$||void 0===$?void 0:$.mobileNumber,helperText:(null===$||void 0===$?void 0:$.mobileNumber)?"This field is required":""})}),Object(L.jsx)(v.a,{item:!0,xs:12,children:Object(L.jsx)(x.a,{id:"Official EmailId",name:"emailId",label:"Official Email Id *",variant:"outlined",fullWidth:!0,onChange:function(e){""!==e.target.value&&ee((function(e){return Object(n.a)(Object(n.a)({},e),{},{email:!1})})),tt(e.target.value)},error:null===$||void 0===$?void 0:$.email,helperText:(null===$||void 0===$?void 0:$.email)?"This field is required.":"",value:et})}),Object(L.jsx)(v.a,{item:!0,xs:12,children:Object(L.jsx)(x.a,{id:"designation",name:"designation",label:"Designation",variant:"outlined",fullWidth:!0,onChange:function(e){mt(e.target.value)},value:bt})})]})})]}),Object(L.jsxs)(v.a,{container:!0,rowSpacing:2,columnSpacing:4,mt:2,children:[Object(L.jsx)(v.a,{item:!0,xs:6,children:Object(L.jsx)(x.a,{id:"employee_name",name:"employee_name",label:"Employee Name*",variant:"outlined",fullWidth:!0,onChange:function(e){""!==e.target.value&&ee((function(e){return Object(n.a)(Object(n.a)({},e),{},{name:!1})})),Je(e.target.value)},error:null===$||void 0===$?void 0:$.name,helperText:(null===$||void 0===$?void 0:$.name)?"This field is required.":"",value:Fe})}),Object(L.jsx)(v.a,{item:!0,xs:6,children:Object(L.jsxs)(O.a,{width:"100%",children:[Object(L.jsx)(z.a,{fullWidth:!0,variant:"outlined",children:Object(L.jsx)(B.a,{value:lt,data:we,handleChange:function(e){console.log({e:e,project:lt}),st(e)},placeholder:Object(L.jsx)("div",{children:"Project"})})}),(null===$||void 0===$?void 0:$.projectId)&&Object(L.jsx)(y.a,{error:"false",children:"This field is required."})]})})]}),Object(L.jsx)(f.a,{sx:{fontSize:"".concat(e.typography.pxToRem(15)),mt:3},variant:"h6",children:"USER PERMISSIONS"}),Object(L.jsx)(z.a,{sx:{mt:1},component:"fieldset",variant:"standard",children:Object(L.jsxs)(E.a,{children:[le.length>1&&Object(L.jsx)(T.a,{control:Object(L.jsx)(w.a,{checked:Be,onChange:function(e){return function(e){if(e.target.checked){var t=le.map((function(e){return e._id}));Ne(t)}else Ne([])}(e)},name:"selectAll",indeterminate:Ae,inputProps:{"aria-label":"controlled"}}),label:"Select All"}),Object(L.jsx)(v.a,{container:!0,spacing:1,children:le.map((function(e){var t=Te.includes(e._id);return Object(L.jsx)(v.a,{item:!0,xs:le.length>2?le.length>1?4:12:le.length<=2?6:12,children:Object(L.jsx)(T.a,{control:Object(L.jsx)(w.a,{id:e._id,checked:t,onChange:De,name:e.name}),label:"reassignRM"===e.name?"Reassign RM":e.description})})}))})]})}),Object(L.jsx)(S.a,{sx:{my:2}}),K&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(O.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",mt:2},children:[Object(L.jsx)(f.a,{variant:"h4",sx:{color:ce?"#6bbb3e":"#f24743"},children:ce?"Active":"Deactive"}),Object(L.jsx)(k.a,{defaultChecked:!0,color:"success",checked:ce,onChange:function(e){ie(e.target.checked)}})]}),Object(L.jsx)(S.a,{sx:{my:2}})]}),Object(L.jsxs)(O.a,{mt:5,mb:5,children:[Object(L.jsx)(C.a,{variant:"contained",onClick:function(){Ot()},children:Xe?Object(L.jsx)(M.a,{size:22,style:{color:"white"}}):K?" Save Changes ":"Add Member"}),Object(L.jsx)(C.a,{sx:{ml:2},variant:"outlined",onClick:function(){We("/team/".concat(j))},children:"Cancel"})]})]})})]}),Ie&&Object(L.jsx)(_.a,{openConfirmDelete:Ie,closeConfirmDelete:function(){_e(!1)},handleDeleteCompleted:function(e){_e(!1),Object(W.handleRemoveFromS3)(e).then((function(e){e&&Ye("")}))},title:"Profile Image",selectedId:Qe}),Object(L.jsx)(J.a,{isOpen:be,isClosed:function(e){e&&(Oe(""),me(!1),pe||We("/team/".concat(j)))},errorMessage:pe,successMessage:ge,closeSuccessNotification:function(){xe("")}})]})}},914:function(e,t,a){"use strict";var n=a(10),c=(a(1),a(1080)),i=a(1054),o=a(0),r=Object(i.a)(),l={control:function(e){return Object(n.a)(Object(n.a)({},e),{},{minHeight:50,borderRadius:"10px"})}};t.a=function(e){var t=e.data,a=e.handleChange,n=e.placeholder,i=e.value;return Object(o.jsx)(c.a,{options:t,minMenuHeight:"200px",value:i,styles:l,components:r,isMulti:!0,onChange:a,placeholder:n})}}}]);
//# sourceMappingURL=84.23ee53ea.chunk.js.map